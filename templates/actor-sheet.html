<form class="{{cssClass}} actor-sheet" autocomplete="off">


  {{!-- Base Character Information --}}
  <section id="base-info" class="section big-teeth-section">
    <table>
      <tr>
        <td colspan="2">
          {{!-- Character Name --}}
          <div id="name">
            <input type="text" id="character-{{actor._id}}-name" name="name" value="{{actor.name}}">
          </div>
        </td>
        <td rowspan="4">
          {{!-- Large Profile Picture --}}
          <img class="profile-img profile-big" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
        </td>
      </tr>
      <tr>
        <td>
          {{!-- Monster Race --}}
          <div class="item-block flex-vertical">
            <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="monsterrace">{{localize "FITD.MonsterRace"}}</a></div>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "monsterrace")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <div class="item-name">{{item.name}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
            {{/if}}
            {{/each}}
          </div>
        </td>
        <td colspan="1">
          {{!-- Look --}}
          <div id="look">
            <label for="character-{{actor._id}}-look">{{localize "FITD.Look"}}</label>
            <input type="text" id="character-{{actor._id}}-look" name="data.look" value="{{data.look}}">
          </div>
        </td>
      </tr>
      <tr>
        <td>
          {{!-- Calling --}}
          <div class="item-block flex-vertical">
            <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="calling">{{localize "FITD.Calling"}}</a></div>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "calling")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <div class="item-name">{{item.name}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
            {{/if}}
            {{/each}}
          </div>
        </td>
        <td>
          {{!-- Minion Pack --}}
          <div id="minionpack">
            <label for="character-{{actor._id}}-minionpack">{{localize "FITD.MinionPack"}}</label>
            <input type="text" id="character-{{actor._id}}-minionpack" name="data.minionpack" value="{{data.minionpack}}">
          </div>
        </td>
      </tr>
      <tr>
        <td>
          {{!-- Revelry --}}
          <div class="item-block flex-vertical">
            <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="revelry">{{localize "FITD.Revelry"}}</a></div>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "revelry")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <div class="item-name">{{item.name}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
            {{/if}}
            {{/each}}
          </div>
        </td>
        <td>
          {{!-- Vile Friend --}}
          <div id="vilefriend">
            <label for="character-{{actor._id}}-vilefriend">{{localize "FITD.VileFriend"}}</label>
            <input type="text" id="character-{{actor._id}}-vilefriend" name="data.vilefriend" value="{{data.vilefriend}}">
          </div>
        </td>
      </tr>
      <tr>
        <td>
          {{!-- Gold --}}
          <div id="character-{{actor._id}}-gold" class="big-teeth gold">
            {{#multiboxes data.gold}}
            <input type="radio" id="character-{{actor._id}}-gold-0" name="data.gold" value="0" dtype="Radio">
			<div class="tooltip">
				<label class="black-label" for="character-{{actor._id}}-gold-0">{{localize "FITD.Coin"}}</label>
				<span class="tooltiptext tooltipslow">{{{localize "FITD.TooltipCoin"}}}</span>
			</div>
			
            {{#times_from_1 3}}
            <input type="radio" id="character-{{../actor._id}}-gold-{{this}}" name="data.gold" value="{{this}}" dtype="Radio">
			<label for="character-{{../actor._id}}-gold-{{this}}"></label>
            {{/times_from_1}}

            {{/multiboxes}}
          </div>
        </td>	  
        <td>
          {{!-- Wicked XP --}}
          <div id="character-{{actor._id}}-wickedxp" class="big-teeth xp-bar">
            {{#multiboxes data.wickedxp.value}}
            <input type="radio" id="character-{{actor._id}}-wickedxp-0" name="data.wickedxp.value" value="0" dtype="Radio">
			<div class="tooltip">
				<label class="black-label" for="character-{{actor._id}}-wickedxp-0">{{localize data.wickedxp.name}}</label>
				<span class="tooltiptext tooltipslow">{{{localize "FITD.TooltipWicked"}}}</span>
			</div>
			
            {{#times_from_1 data.wickedxp.max}}
            <input type="radio" id="character-{{../actor._id}}-wickedxp-{{this}}" name="data.wickedxp.value" value="{{this}}" dtype="Radio">
            <label for="character-{{../actor._id}}-wickedxp-{{this}}"></label>
            {{/times_from_1}}

            {{/multiboxes}}
          </div>
        </td>
        <td>
          {{!-- Reckless XP --}}
          <div id="character-{{actor._id}}-recklessxp" class="big-teeth xp-bar">
            {{#multiboxes data.recklessxp.value}}
            <input type="radio" id="character-{{actor._id}}-recklessxp-0" name="data.recklessxp.value" value="0" dtype="Radio">
			<div class="tooltip">
				<label class="black-label" for="character-{{actor._id}}-recklessxp-0">{{localize data.recklessxp.name}}</label>
				<span class="tooltiptext tooltipslow">{{{localize "FITD.TooltipReckless"}}}</span>
			</div>
            {{#times_from_1 data.recklessxp.max}}
            <input type="radio" id="character-{{../actor._id}}-recklessxp-{{this}}" name="data.recklessxp.value" value="{{this}}" dtype="Radio">
            <label for="character-{{../actor._id}}-recklessxp-{{this}}"></label>
            {{/times_from_1}}

            {{/multiboxes}}
          </div>
        </td>
      </tr>
    </table>
  </section>

  {{!-- Defenses, Stress, Impulses, Tabs & Attributes --}}
  <section class="flex-horizontal">

    <div id="wo-nav-container" class="tab-content flex-vertical grow-two">
      {{!-- Defenses, Stress Clock & Impulses --}}
      <div id="defenses-stress">
        <div id="character-defenses">
          {{!-- TO DO: Reduce One Level --}}
          <table>
            <thead>
              <tr>
                <th class="black-white">
                  {{localize "FITD.Defenses"}} <a class="item-add-popup" data-distinct="false" data-item-type="defense"><i class="fas fa-plus-square"></i></a>
                </th>
                <th class="black-white tooltip">{{localize "FITD.Stress"}}<span class="tooltiptext tooltipslow">{{{localize "FITD.TooltipStress"}}}</span></th>
                <th class="black-white">
                  {{localize "FITD.Impulse"}} <a class="item-add-popup" data-distinct="false" data-item-type="wickedimpulse"><i class="fas fa-plus-square"></i></a>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div class="item-block flex-vertical">
                    {{#each actor.items as |item id|}}
                    {{#if (eq item.type "defense")}}
                    <div class="item flex-horizontal" data-item-id="{{item._id}}">
                      <div class="item-checkmark">
                        <input type="checkbox" id="item-{{item._id}}-checked" value="{{item.data.checked}}" {{checked item.data.checked}}>
                        <label for="item-{{item._id}}-checked"></label>
                      </div>
                      <div class="item-body flex-horizontal">
                        <div class="item-name">{{item.name}}</div>
                      </div>
                      <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
                    </div>
                    {{/if}}
                    {{/each}}
                  </div>
                </td>
                <td>
                  <div id="character-stress-clock">
                    {{{blades-clock "data.stress_clock" 6 data.stress_clock actor._id}}}
                  </div>
                </td>
                <td>
                  <div class="item-block flex-vertical">
                    {{#each actor.items as |item id|}}
                    {{#if (eq item.type "wickedimpulse")}}
                    <div class="item flex-horizontal" data-item-id="{{item._id}}">
                      <div class="item-body flex-horizontal">
                        <div class="item-name">{{item.name}}</div>
                      </div>
                      <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
                    </div>
                    {{/if}}
                    {{/each}}
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      {{!-- Nav menu --}}
      <nav class="tabs flex-horizontal">
        <a class="item" data-tab="abilities">{{localize "FITD.Abilities"}}</a>
        <a class="item" data-tab="loadout">{{localize "FITD.Loadout"}}</a>
        <a class="item" data-tab="duties">{{localize "FITD.DutiesProjects"}}</a>
        <a class="item" data-tab="character-notes">{{localize "FITD.Notes"}}</a>
        <a class="item" data-tab="all-character-items">{{localize "FITD.AllItems"}}</a>
      </nav>

      {{!-- Special Abilities Tab --}}
      <div id="abilities" class="tab flex-vertical" data-tab="abilities">
        <div class="label-stripe flex-horizontal">
          <p><label for="character-{{actor._id}}-experience-0">{{localize "FITD.Abilities"}}</label></p>
          <p><a class="item-add-popup" data-item-type="specialability"><i class="fas fa-plus-square"></i></a></p>
        </div>

        <table id="abilities-list">
          <tbody>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "specialability")}}
            <tr class="item" data-item-id="{{item._id}}">
              <td class="item-body">
                <div class="item-name"><b>{{item.name}}</b></div>
              </td>
              <td class="item-body">
                <div class="item-description">{{item.data.description}}</div>
              </td>
              <td>
                <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
              </td>
            </tr>
            {{/if}}
            {{/each}}
          </tbody>
        </table>
      </div>

      {{!-- Gear & Supply Tab --}}
      <div id="loadout" class="tab flex-vertical" data-tab="loadout">
        <div class="label-stripe flex-horizontal">
          <p>{{localize "FITD.Gear"}}</p>
          <p><a class="item-add-popup" data-item-type="gear"><i class="fas fa-plus-square"></i></a></p>
        </div>
        <table>
          <tbody>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "gear")}}
            <tr class="item" data-item-id="{{item._id}}">
              <td class="item-body"><div class="item-name">{{item.name}}</div></td>
              <td class="item-body"><div class="item-description">{{item.data.description}}</div></td>
              <td><a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a></td>
            </tr>
            {{/if}}
            {{/each}}
          </tbody>
        </table>
        <div id="character-{{actor._id}}-supply" class="label-stripe flex-horizontal supply">
          <p class="flex-horizontal">
            {{#multiboxes data.supply}}
            <input type="radio" id="character-{{actor._id}}-supply-0" name="data.supply" value="0" dtype="Radio">
            <label for="character-{{actor._id}}-supply-0">{{localize "FITD.Supply"}}</label>
            {{#times_from_1 data.max_supply}}
            <input type="radio" id="character-{{../actor._id}}-supply-{{this}}" name="data.supply" value="{{this}}" dtype="Radio">
            <label for="character-{{../actor._id}}-supply-{{this}}"></label>
            {{/times_from_1}}

            {{/multiboxes}}
          </p>
          <p><a class="item-add-popup" data-item-type="supply"><i class="fas fa-plus-square"></i></a></p>
        </div>
        <table>
          <tbody>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "supply")}}
            <tr class="item">
              <td class="item-body"><div class="item-name">{{item.name}}</div></td>
              <td class="item-body"><div class="item-description">{{item.data.description}}</div></td>
              <td><a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a></td>
            </tr>
            {{/if}}
            {{/each}}
          </tbody>
        </table>
      </div>

      {{!-- Duties & Projects Tab --}}
      <div id="duties-tab" class="tab flex-vertical" data-tab="duties">
        <div class="label-stripe flex-horizontal">
          <p>{{localize "FITD.Duties"}}</p>
          <p><a class="item-add-popup" data-item-type="duty"><i class="fas fa-plus-square"></i></a></p>
        </div>
        <table id="duties-table">
          <thead>
            <tr>
              <td>Tier</td>
              <td>Type</td>
              <td>Description</td>
              <td></td>
            </tr>
          </thead>
          <tbody>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "duty")}}
            <tr class="item" data-item-id="{{item._id}}">
              <td class="item-name item-body">{{item.data.tier}}</td>
              <td class="item-name item-body">{{item.data.type}}</td>
              <td class="item-name item-body">{{item.data.description}}</td>
              <td><a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a></td>
            </tr>
            {{/if}}
            {{/each}}
          </tbody>
        </table>
        <div class="label-stripe flex-horizontal">
          <p class="tooltip">{{localize "FITD.Projects"}}<span class="tooltiptext tooltipslow">{{{localize "FITD.TooltipProjects"}}}</span></p>
          <p><a class="item-add-popup" data-item-type="project"><i class="fas fa-plus-square"></i></a></p>
        </div>

        <table id="project-clocks-table">
          <thead>
            <tr>
              <td>Clock</td>
              <td>Name</td>
              <td>Description</td>
              <td></td>
            </tr>
          </thead>
          <tbody>
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "project")}}
            <tr class="item" data-item-id="{{item._id}}">
              <td class="flex-horizontal project-clock">
                <div id="project-clock-{{item._id}}">
                  {{{blades-clock "data.project_clock" item.data.clock_size item.data.clock_progress item._id}}}
                </div>
              </td>
              <td class="item-body"><div class="item-name">{{item.name}}</div></td>
              <td class="item-body"><div class="item-description">{{item.data.description}}</div></td>
              <td><a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a></td>
            </tr>
            {{/if}}
            {{/each}}
          </tbody>
        </table>
      </div>

      {{!-- Notes Tab --}}
      <div class="tab flex-vertical" data-tab="character-notes">
        <div class="label-stripe">
          <p>{{localize "FITD.Notes"}}</p>
        </div>
        <textarea rows="13" name="data.description">{{{data.description}}}</textarea>
      </div>

      {{!-- Full Item List --}}
      <div class="tab grow-two flex-vertical" data-tab="all-character-items">
        <div class="label-stripe">
          <p><label>{{localize "FITD.AllItems"}}</label></p>
        </div>
        {{#each actor.items as |item id|}}
        <div class="item flex-horizontal all-items-list" data-item-id="{{item._id}}">
          <div class="item-body item-sheet-open flex-horizontal">
            <img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
            <div class="item-name">{{item.name}}</div>
          </div>
          <a class="item-control item-delete" title="{{localize 'FITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
        </div>
        {{/each}}
      </div>

    </div>
    {{!-- Attributes --}}
    {{> "systems/wicked-ones/templates/parts/attributes.html" actor=actor}}
  </section>

</form>
